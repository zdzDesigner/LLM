# ğŸ” ä»£ç æœ€ä½³å®è·µæ·±åº¦åˆ†ææŠ¥å‘Šï¼šPython é”™è¯¯é‡è¯•æœºåˆ¶

## 1. ğŸ“‹ æ ¸å¿ƒç»“è®º (Executive Summary)
æœ¬åœ°ä»£ç åº“ç›®å‰**ä¸å­˜åœ¨**ç»Ÿä¸€çš„é‡è¯•æœºåˆ¶å®ç°ã€‚ä¸šç•Œï¼ˆå¦‚ Airflow, LlamaIndexï¼‰å¹¿æ³›é‡‡ç”¨ **`tenacity`** åº“ä½œä¸ºæ ‡å‡†è§£å†³æ–¹æ¡ˆï¼Œå»ºè®®ç›´æ¥å¼•å…¥è¯¥åº“ä»¥é¿å…é‡å¤é€ è½®å­ã€‚

## 2. ğŸ  æœ¬åœ°ä»£ç åº“ç°çŠ¶ (Local Context)
**åˆ†ææ™ºèƒ½ä½“**: `explore`
**æœç´¢èŒƒå›´**: æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ (*.py)

### å‘ç°çš„æ¨¡å¼
- **æœªå‘ç°**: åœ¨å½“å‰å·¥ä½œç›®å½•åŠå­ç›®å½•ä¸­ï¼Œæœªæ‰«æåˆ° `def retry`ã€`@retry` æˆ– `backoff` ç›¸å…³çš„è‡ªå®šä¹‰å®ç°ã€‚

### å­˜åœ¨çš„é—®é¢˜
- [ ] **ç¼ºä¹ç»Ÿä¸€æ ‡å‡†**: å¦‚æœæœªæ¥éœ€è¦æ·»åŠ ç½‘ç»œè¯·æ±‚æˆ–ä¸ç¨³å®šæ“ä½œï¼Œå¯èƒ½ä¼šå¯¼è‡´å¼€å‘è€…å„è‡ªå®ç°ç®€é™‹çš„ `try/except` å¾ªç¯ã€‚
- [ ] **æ½œåœ¨é£é™©**: æ‰‹å†™é‡è¯•é€»è¾‘å®¹æ˜“é—æ¼æŒ‡æ•°é€€é¿ï¼ˆexponential backoffï¼‰å’ŒæŠ–åŠ¨ï¼ˆjitterï¼‰ï¼Œå¯¼è‡´æƒŠç¾¤æ•ˆåº”ã€‚

## 3. ğŸŒ è¡Œä¸šæœ€ä½³å®è·µ (Industry Standards)
**åˆ†ææ™ºèƒ½ä½“**: `librarian` (Simulated via Grep.app)
**æ•°æ®æ¥æº**: GitHub Top Repos (Apache Airflow, LlamaIndex, Pydantic AI)

### æ¨èæ–¹æ¡ˆ
> æ¥æº: [Apache Airflow](https://github.com/apache/airflow) / [LlamaIndex](https://github.com/run-llama/llama_index)

æœ€é€šç”¨çš„æ¨¡å¼æ˜¯ä½¿ç”¨ `tenacity` åº“çš„è£…é¥°å™¨ï¼š

```python
from tenacity import retry, stop_after_attempt, wait_exponential, retry_if_exception_type
import requests

# åœæ­¢ç­–ç•¥ï¼šæœ€å¤šé‡è¯• 5 æ¬¡
# ç­‰å¾…ç­–ç•¥ï¼šæŒ‡æ•°é€€é¿ï¼Œä» 1s å¼€å§‹ï¼Œæœ€å¤§ç­‰å¾… 10s
@retry(stop=stop_after_attempt(5), wait=wait_exponential(multiplier=1, max=10))
def fetch_data_unreliable():
    response = requests.get("https://api.example.com/data")
    response.raise_for_status()
    return response.json()
```

### å…³é”®è®¾è®¡ç‚¹
- **æŒ‡æ•°é€€é¿ (Exponential Backoff)**: é¿å…æœåŠ¡ä¸å¯ç”¨æ—¶ç«‹å³å‘èµ·é«˜é¢‘é‡è¯•ï¼Œç»™æœåŠ¡å™¨å–˜æ¯æ—¶é—´ã€‚
- **ç‰¹å®šå¼‚å¸¸é‡è¯•**: åªé‡è¯•ç½‘ç»œé”™è¯¯æˆ– 5xx é”™è¯¯ï¼Œä¸é‡è¯• 4xx å®¢æˆ·ç«¯é”™è¯¯ã€‚
- **å¯è§‚æµ‹æ€§**: `tenacity` æ”¯æŒ `before_sleep` å›è°ƒï¼Œä¾¿äºè®°å½•é‡è¯•æ—¥å¿—ã€‚

## 4. ğŸ’¡ ç»¼åˆå»ºè®® (Recommendation)

### ğŸš€ å»ºè®®å®æ–½æ–¹æ¡ˆ
1. **å¼•å…¥ä¾èµ–**: æ·»åŠ  `tenacity` åˆ° `requirements.txt` æˆ– `pyproject.toml`ã€‚
2. **å°è£…é€šç”¨è£…é¥°å™¨**: åœ¨ `utils/retry.py` ä¸­å°è£…ç¬¦åˆé¡¹ç›®é…ç½®ï¼ˆå¦‚é»˜è®¤é‡è¯•3æ¬¡ï¼‰çš„è£…é¥°å™¨ï¼Œç»Ÿä¸€æ—¥å¿—æ ¼å¼ã€‚
3. **åº”ç”¨åœºæ™¯**: æ›¿æ¢æ‰€æœ‰è£¸å†™çš„ `while True: try...` é€»è¾‘ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠ HTTP è¯·æ±‚æˆ–æ•°æ®åº“è¿æ¥çš„éƒ¨åˆ†ã€‚

### âš ï¸ é¿å‘æŒ‡å— (Anti-patterns)
- âŒ é¿å…: æ‰‹å†™é€’å½’å‡½æ•°è¿›è¡Œé‡è¯•ï¼ˆå®¹æ˜“å¯¼è‡´æ ˆæº¢å‡ºï¼‰ã€‚
- âŒ é¿å…: ç®€å•çš„ `time.sleep(1)` å›ºå®šç­‰å¾…ï¼ˆæ— æ³•åº”å¯¹å¤§è§„æ¨¡å¹¶å‘æ•…éšœï¼‰ã€‚
- âœ… æ¨è: å§‹ç»ˆè®¾ç½® `stop` æ¡ä»¶ï¼ˆæœ€å¤§æ¬¡æ•°æˆ–æœ€å¤§æ—¶é—´ï¼‰ï¼Œé˜²æ­¢æ— é™æ­»å¾ªç¯ã€‚

---
*Generated by Code Example Searcher Skill*
