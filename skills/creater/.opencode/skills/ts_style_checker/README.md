# TypeScript 规范检查器

## 功能概述

自动检查 TypeScript 文件是否符合项目规范，包括：
- **命名规范**：变量使用 snake_case，函数使用 camelCase
- **Interface/Type 规范**：Interface 定义方法契约，Type 定义数据结构
- **代码简化建议**：识别职责过重的函数和过度抽象

检查后会列出问题清单和修复建议，用户确认后才会执行修改。

## 使用场景

- **修改 TS 文件后**：自动触发检查，确保代码符合规范
- **代码审查时**：快速识别不符合规范的地方
- **新人入职**：帮助理解项目的编码规范
- **重构前**：识别需要调整的命名和类型定义

## 快速开始

### 触发 Skill

直接对 Opencode 说以下任一句：
- "TS规范"
- "代码规范"
- "检查规范"
- "检查一下 TypeScript"

### 示例对话

**User**: TS规范

**Opencode**: [识别到 TypeScript 规范检查器]
正在检查当前修改的 TypeScript 文件...

```
## TypeScript 规范检查报告

**检查文件**: src/utils/device.ts
**发现问题**: 3

### 命名规范问题

| 行号 | 类型 | 当前命名 | 建议修改 |
|------|------|----------|----------|
| 12   | 变量 | userName | user_name |
| 25   | 函数 | get_data | getData |

### Interface/Type 规范问题

| 行号 | 问题描述 | 建议修改 |
|------|----------|----------|
| 45   | Interface 包含属性定义 | 改用 Type |

是否需要自动修复这些问题？(y/n)
```

**User**: y

**Opencode**: ✅ 已修复 3 个问题

## 输入/输出

### 输入
- **文件路径**（可选）：指定要检查的文件，默认检查当前 git 修改的文件
- **检查范围**：只检查 `.ts` 和 `.tsx` 文件

### 输出
- **问题清单**：表格形式展示所有违规项
- **修复建议**：每个问题的具体修改建议
- **修复确认**：用户确认后才执行修改

## 检查规则

### 命名规范

| 类型 | 规范 | 正确示例 | 错误示例 |
|------|------|----------|----------|
| 变量 | snake_case | `device_info` | `deviceInfo` |
| 短布尔变量 | 可连写 | `isready` | - |
| 函数 | camelCase | `calculateChecksum` | `calculate_checksum` |

### Interface/Type 规范

| 场景 | 使用 |
|------|------|
| 方法契约 | Interface |
| 函数签名 | Interface |
| 数据结构 | Type |
| 类型组合 | Type |

## 相关文档

- [REFERENCE_TYPESCRIPT_STYLE.md](REFERENCE_TYPESCRIPT_STYLE.md) - 完整的 TypeScript 规范文档

## 故障排除

### 问题1：没有检测到修改的文件

**症状**：提示"没有找到 TS 文件"  
**原因**：当前没有 git 修改，或修改的不是 TS 文件  
**解决**：手动指定文件路径，如"检查 src/utils/device.ts 的规范"

### 问题2：LSP 工具无法使用

**症状**：提示 LSP 相关错误  
**原因**：TypeScript LSP 服务未启动  
**解决**：确保项目已安装 TypeScript，并在 IDE 中打开过该文件

### 问题3：检查结果不准确

**症状**：误报或漏报  
**原因**：某些复杂的代码模式难以用 AST 匹配  
**解决**：手动检查报告，忽略误报项

## 使用技巧

1. **批量检查**：可以指定目录，如"检查 src/utils 目录的 TS 规范"
2. **跳过确认**：如果信任检查结果，可以说"自动修复所有问题"
3. **只查不改**：说"只检查不修复"可以只看报告

## 更新日志

- v1.0.0 (2025-01-24): 初始版本
  - 支持命名规范检查（snake_case 变量、camelCase 函数）
  - 支持 Interface/Type 规范检查
  - 支持代码简化建议
  - 交互式修复确认
